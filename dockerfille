# Use a imagem oficial do .NET SDK para compilar a aplicação
FROM mcr.microsoft.com/dotnet/sdk:7.0 AS build
WORKDIR /app

# Copia o arquivo do código-fonte
COPY Program.cs .

# Compila o programa em Release
RUN dotnet publish -c Release -o out -r linux-x64 --self-contained false /p:OutputType=Exe

# Cria a imagem final usando a runtime do .NET
FROM mcr.microsoft.com/dotnet/runtime:7.0
WORKDIR /app
COPY --from=build /app/out .

# Define o ponto de entrada da aplicação
ENTRYPOINT ["dotnet", "ConsoleApp1.dll"]
